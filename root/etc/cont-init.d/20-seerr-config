#!/bin/sh
# Seerr configuration setup

PUID=${PUID:-1000}
PGID=${PGID:-1000}

echo "[seerr] Setting up seerr user with PUID=$PUID PGID=$PGID"

# Fix /app directory permissions
chmod 755 /app

# Update user/group IDs if needed
if [ "$PUID" != "358" ]; then
fi
if [ "$PGID" != "358" ]; then
    pw groupmod seerr -g "$PGID" 2>/dev/null || true
fi

# Ensure config directory ownership
chown -R bsd:bsd /config

# Fix app directory ownership if UID/GID changed
if [ "$PUID" != "358" ] || [ "$PGID" != "358" ]; then
    echo "[seerr] Updating app directory ownership..."
    chown -R bsd:bsd /app/seerr
fi

echo "[seerr] Configuration complete"
